npx neonctl@latest init
npm install @clerk/nextjs

in layout.tsx
import {
  ClerkProvider,
} from '@clerk/nextjs'
then wrap the whole html with ClerkProvider

-- Clerk Hooks Learned
useClerk() - contains the openLogin see Navbar
useUser() - contains the User Object refer to AppContext

user Object from 
const {user} = useUser():
{
    "id": "user_35dqmAjB7yvkmJsCPt4uUshzcCW",
    "pathRoot": "/me",
    "externalId": null,
    "username": "xephere",
    "emailAddresses": [
        {
            "id": "idn_35dqiVe0iVh9KcOhjEyeyor1PHs",
            "pathRoot": "/me/email_addresses",
            "emailAddress": "patrickperez.iformatlogic@gmail.com",
            "matchesSsoConnection": false,
            "linkedTo": [
                {
                    "id": "idn_35dqiWM7LTtWJjoQ9wtOPA1USx5",
                    "pathRoot": "",
                    "type": "oauth_google"
                }
            ],
            "verification": {
                "pathRoot": "",
                "status": "verified",
                "strategy": "from_oauth_google",
                "nonce": null,
                "message": null,
                "externalVerificationRedirectURL": null,
                "attempts": null,
                "expireAt": "2025-11-18T08:12:21.954Z",
                "error": null
            }
        }
    ],
    "phoneNumbers": [],
    "web3Wallets": [],
    "externalAccounts": [
        {
            "id": "eac_35dqiZpwrWy68SYt9g3ITvwaKjv",
            "pathRoot": "/me/external_accounts",
            "identificationId": "idn_35dqiWM7LTtWJjoQ9wtOPA1USx5",
            "provider": "google",
            "providerUserId": "111907132999216830871",
            "emailAddress": "patrickperez.iformatlogic@gmail.com",
            "approvedScopes": "email https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid profile",
            "firstName": "Patrick Royce",
            "lastName": "Perez",
            "imageUrl": "https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS9BQ2c4b2NJS1lHRm96X1QyVEV4MDNjaUtVM3llankyNW82aVlVNmZxM2JNd01lTlhuVEE3bWtNPXMxMDAwLWMiLCJzIjoia21ZN1dFdDB6NmZNdjNiaVRhZDNSM012Wm5nOXRpM0tRKzJLMmgzaTR3YyJ9",
            "username": "",
            "phoneNumber": "",
            "publicMetadata": {},
            "label": null,
            "verification": {
                "pathRoot": "",
                "status": "verified",
                "strategy": "oauth_google",
                "nonce": null,
                "message": null,
                "externalVerificationRedirectURL": null,
                "attempts": null,
                "expireAt": "2025-11-18T07:30:16.314Z",
                "error": null
            }
        }
    ],
    "enterpriseAccounts": [],
    "passkeys": [],
    "samlAccounts": [],
    "organizationMemberships": [],
    "passwordEnabled": false,
    "firstName": "Patrick Royce",
    "lastName": "Perez",
    "fullName": "Patrick Royce Perez",
    "primaryEmailAddressId": "idn_35dqiVe0iVh9KcOhjEyeyor1PHs",
    "primaryEmailAddress": {
        "id": "idn_35dqiVe0iVh9KcOhjEyeyor1PHs",
        "pathRoot": "/me/email_addresses",
        "emailAddress": "patrickperez.iformatlogic@gmail.com",
        "matchesSsoConnection": false,
        "linkedTo": [
            {
                "id": "idn_35dqiWM7LTtWJjoQ9wtOPA1USx5",
                "pathRoot": "",
                "type": "oauth_google"
            }
        ],
        "verification": {
            "pathRoot": "",
            "status": "verified",
            "strategy": "from_oauth_google",
            "nonce": null,
            "message": null,
            "externalVerificationRedirectURL": null,
            "attempts": null,
            "expireAt": "2025-11-18T08:12:21.954Z",
            "error": null
        }
    },
    "primaryPhoneNumberId": null,
    "primaryPhoneNumber": null,
    "primaryWeb3WalletId": null,
    "primaryWeb3Wallet": null,
    "imageUrl": "https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zNWRxbUJGekhPdzFvclhyaldHZ3BOdDZOSjYifQ",
    "hasImage": true,
    "twoFactorEnabled": false,
    "totpEnabled": false,
    "backupCodeEnabled": false,
    "publicMetadata": {},
    "unsafeMetadata": {},
    "createOrganizationEnabled": true,
    "createOrganizationsLimit": null,
    "deleteSelfEnabled": true,
    "lastSignInAt": "2025-11-18T07:45:07.313Z",
    "legalAcceptedAt": null,
    "updatedAt": "2025-11-18T07:45:07.338Z",
    "createdAt": "2025-11-18T07:20:52.713Z",
    "cachedSessionsWithActivities": null
}

-- Creating another Tab in the User Button refer to navbar
<UserButton>
<UserButton.MenuItems> 
    <UserButton.Action 
    label="Cart"
    labelIcon={<ShoppingCart size={16}/>}
    onClick={() => {}}
    />
</UserButton.MenuItems> 
</UserButton> 

you can make your own custom icons using SVG code then import it as a component. see assets.js for reference.

You can also use this feature to replace the burger icon

install clerk themes then import shadcn theme, modify the User button
<UserButton
      appearance={{
    baseTheme: shadcn, // use any base theme
  }}

  change the logged out button also.


# Public Environment Variables
NEXT_PUBLIC_CURRENCY=PHP
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_dW5pdGVkLXJhcHRvci00NC5jbGVyay5hY2NvdW50cy5kZXYk

# Private Environment Variables
CLERK_SECRET_KEY=sk_test_aJ8aJMo6RUPGcSKVYfZZQdFcbJHY4TODcZsTehoFc4

# Prisma connection string
DATABASE_URL='postgresql://neondb_owner:npg_4PRkSJlDsHo7@ep-still-waterfall-a4seb2um-pooler.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require'

CLOUDINARY_CLOUD_NAME=dlgc8nx7r 
CLOUDINARY_API_KEY=798229333128363 
CLOUDINARY_API_SECRET=zj7HMYqB9FkRocFTUo4pA6yyKx8

INNGEST_EVENT_KEY='inZdO8qaK37ZojnTURo7Ns8GX8_zVF-4dyzWYaY_oCOzUvRcsNV8fiqBMjkEjz_LAGIti9pNHqGiwOwQaXIlFA'
INNGEST_SIGNING_KEY='signkey-prod-0ba6770c588d8ca5f03e4daea1b0291bfdf35f46b3b8eb4767d61754a7cbc9a4'

currently studying inngest.
refer to this guide:
https://www.inngest.com/docs/getting-started/nextjs-quick-start?ref=docs-home

Inngest is the platform clerk uses to handle webhooks from clerk.
clerk events eg. user signs in, clerk passes a webhook to inngest,
inngest passes that webhook event to your app via the .env var

=> create your inngest account,
=> add your env vars
=> npm install inngest
=> create the inngest client
=> connect clerk webhook to inngest

deploy your app to vercel

Encountered lots of errors during deployment. (typescript) 
It is better to fix it all first before deployment

installed a folder markdown plugin 

fixed all the typescript errors

deployed the app to vercel
https://next-ecommerce-silk-rho.vercel.app/

after successful deployment, add the domain to the webhook of inngest

remember to always create the helper function.
add this to your schema.prisma
binaryTargets = ["native", "debian-openssl-3.0.x", "rhel-openssl-3.0.x"]

everything in the appcontext becomes stale. even the user.metadata. so always access it inside the clerk itself.

import { useAuth } from "@clerk/nextjs"
const {getToken} = useAuth();

learned that you can immediately destructure your axios call.
const {data} = await axios.get("/api/user/data")

the useClerk is a client version of the data. it can be tampered and is public. 
the authseller code in the lib is server code. used for access control.

solved the authUser error. seller can now create products

useAuth and getAuth is different. useAuth is for client, getAuth is for server. need to pass an request in getAuth

================ cartItems ================
[
  {
    id: 'cmigljwao000dubzkzk531eng',
    userId: 'user_362FdVsKPrpI75Pzg7B4fEzNUYu',
    productId: 'cmiglf7ai0003ubzka8xpjtfk',
    quantity: 3,
    createdAt: 2025-11-26T22:49:11.233Z,
    updatedAt: 2025-11-26T23:18:51.596Z,
    product: {
      id: 'cmiglf7ai0003ubzka8xpjtfk',
      userId: 'user_362FdVsKPrpI75Pzg7B4fEzNUYu',
      name: 'Acer Chromebook R11',
      description: 'The Acer R11 is an 11.6″ convertible Chromebook with a touchscreen and a 360° fold-over hinge. It runs Chrome OS and typically comes with an Intel Celeron processor, 4 GB RAM, and 32 GB eMMC storage. Its compact size, convertible/touch design, and portability make it ideal for light computing — browsing, documents, streaming — as a budget-friendly everyday laptop/tablet hybrid.',
      category: 'Earphone',
      image: [Array],
      price: 2500,
      offerPrice: 2499,
      createdAt: 2025-11-26T22:45:30.665Z,
      updatedAt: 2025-11-26T22:45:30.665Z
    }
  },
  {
    id: 'cmigmo4y60003jj04082zm20r',
    userId: 'user_362FdVsKPrpI75Pzg7B4fEzNUYu',
    productId: 'cmiglfyox0005ubzkd4gs490s',
    quantity: 1,
    createdAt: 2025-11-26T23:20:28.687Z,
    updatedAt: 2025-11-26T23:20:28.687Z,
    product: {
      id: 'cmiglfyox0005ubzkd4gs490s',
      userId: 'user_362FdVsKPrpI75Pzg7B4fEzNUYu',
      name: 'Acer Chromebook N19Q3',
      description: 'The Acer Chromebook N19Q3 (also sold as the Acer Chromebook 315 CB315-3H) is a 15.6″ Chromebook running ChromeOS. It typically comes with an Intel Celeron N-series processor (e.g. N4020 or N4120), 4 GB RAM, and ~64 – 128 GB of eMMC/SSD storage.',
      category: 'Earphone',
      image: [Array],
      price: 2500,
      offerPrice: 499,
      createdAt: 2025-11-26T22:46:07.498Z,
      updatedAt: 2025-11-26T22:46:07.498Z
    }
  },
  ...
]

================ ORDER MODEL ================

model Order {
  id                String  @id @default(cuid())
  userId            String
  shippingAddressId String?

  amount         Int
  isPaid         Boolean  @default(false)
  shippingMethod String
  orderDate      DateTime @default(now())

  user            User             @relation(fields: [userId], references: [id])
  shippingAddress ShippingAddress? @relation(fields: [shippingAddressId], references: [id])
  items           OrderItem[]

  @@index([userId])
}

model OrderItem {
  id        String @id @default(cuid())
  orderId   String
  productId String
  quantity  Int

  order   Order   @relation(fields: [orderId], references: [id])
  product Product @relation(fields: [productId], references: [id])

  @@index([orderId])
  @@index([productId])
}

*/